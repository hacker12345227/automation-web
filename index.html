<!DOCTYPE html>
<html>
<head>
  <title>Automation Panel</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    input, button, select { padding: 10px; margin: 10px 0; width: 300px; }
    .action { display: flex; gap: 10px; margin-bottom: 10px; }
    .action select, .action input { flex: 1; }
  </style>
</head>
<body>
  <h1>Automation Panel</h1>

  <div id="actionsContainer"></div>

  <button onclick="addAction()">Actie toevoegen</button><br>
  <button onclick="start()">Starten</button>
  <button onclick="stop()">Stoppen</button>

  <script>
    const keys = [
      "a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z",
      "1","2","3","4","5","6","7","8","9","0",
      "space","leftMouse","rightMouse"
    ];

    function addAction() {
      const container = document.getElementById("actionsContainer");

      const actionDiv = document.createElement("div");
      actionDiv.classList.add("action");

      const keySelect = document.createElement("select");
      keys.forEach(k => {
        const option = document.createElement("option");
        option.value = k;
        option.text = k;
        keySelect.appendChild(option);
      });

      const intervalInput = document.createElement("input");
      intervalInput.type = "number";
      intervalInput.value = 1000;
      intervalInput.placeholder = "Interval (ms)";

      const removeBtn = document.createElement("button");
      removeBtn.textContent = "Verwijderen";
      removeBtn.type = "button";
      removeBtn.onclick = () => container.removeChild(actionDiv);

      actionDiv.appendChild(keySelect);
      actionDiv.appendChild(intervalInput);
      actionDiv.appendChild(removeBtn);

      container.appendChild(actionDiv);
    }

    function start() {
      const actions = [];
      document.querySelectorAll("#actionsContainer .action").forEach(div => {
        const key = div.querySelector("select").value;
        const interval = parseInt(div.querySelector("input").value);
        actions.push({ key, interval });
      });

      fetch("http://localhost:5000/start", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ actions })
      });
    }

    function stop() {
      fetch("http://localhost:5000/stop", { method: "POST" });
    }

    // Voeg alvast één actie toe bij laden
    addAction();
  </script>
</body>
</html>
